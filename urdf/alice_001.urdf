<?xml version="1.0" encoding="utf-8"?>
<!--
  Alice 001 - Hiwonder xArm 1S (5 DOF + 2 gripper fingers = 7 DOF)

  Kinematic chain derived from XArm.STEP assembly + MuJoCo reference model.
  Meshes extracted from XArm.STEP, decimated and re-centered at link frames.
  Gripper fingers use box primitives (suitable for RL training).

  Joint offsets derived from assembly mesh boundary analysis:
    base_joint (Z-axis):     65mm above ground
    shoulder_joint (Y-axis): 15mm above base_joint
    elbow_joint (Y-axis):    86mm above shoulder
    wrist_pitch (Y-axis):    86mm above elbow
    wrist_roll (Z-axis):     43mm above wrist_pitch
    finger joints (Y-axis):  40mm above wrist_roll
-->
<robot name="alice_001">

  <!-- ==================== MATERIALS ==================== -->
  <material name="dark_grey">
    <color rgba="0.3 0.3 0.3 1.0"/>
  </material>
  <material name="blue">
    <color rgba="0.2 0.4 0.8 1.0"/>
  </material>
  <material name="yellow">
    <color rgba="0.9 0.8 0.2 1.0"/>
  </material>

  <!-- ==================== BASE LINK ==================== -->
  <link name="base_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://meshes/visual/base_link.stl"/>
      </geometry>
      <material name="dark_grey"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://meshes/collision/base_link.stl"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0 0 0.039" rpy="0 0 0"/>
      <mass value="0.25"/>
      <inertia ixx="0.0004" ixy="0" ixz="0"
               iyy="0.0004" iyz="0" izz="0.0006"/>
    </inertial>
  </link>

  <!-- ==================== BASE JOINT (turntable rotation) ==================== -->
  <joint name="base_joint" type="revolute">
    <parent link="base_link"/>
    <child link="shoulder_link"/>
    <origin xyz="0 0 0.065" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="-3.14159" upper="3.14159" effort="2.5" velocity="5.24"/>
    <dynamics damping="0.1" friction="0.1"/>
  </joint>

  <!-- ==================== SHOULDER LINK ==================== -->
  <link name="shoulder_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://meshes/visual/shoulder_link.stl"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://meshes/collision/shoulder_link.stl"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="-0.006 0 0.045" rpy="0 0 0"/>
      <mass value="0.15"/>
      <inertia ixx="0.0002" ixy="0" ixz="0"
               iyy="0.0002" iyz="0" izz="0.00008"/>
    </inertial>
  </link>

  <!-- ==================== SHOULDER JOINT ==================== -->
  <joint name="shoulder_joint" type="revolute">
    <parent link="shoulder_link"/>
    <child link="upper_arm_link"/>
    <origin xyz="0 0 0.086" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-1.5708" upper="1.5708" effort="2.5" velocity="5.24"/>
    <dynamics damping="0.1" friction="0.1"/>
  </joint>

  <!-- ==================== UPPER ARM LINK ==================== -->
  <link name="upper_arm_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://meshes/visual/upper_arm_link.stl"/>
      </geometry>
      <material name="dark_grey"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://meshes/collision/upper_arm_link.stl"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.003 0 0.043" rpy="0 0 0"/>
      <mass value="0.15"/>
      <inertia ixx="0.0002" ixy="0" ixz="0"
               iyy="0.0002" iyz="0" izz="0.00003"/>
    </inertial>
  </link>

  <!-- ==================== ELBOW JOINT ==================== -->
  <joint name="elbow_joint" type="revolute">
    <parent link="upper_arm_link"/>
    <child link="lower_arm_link"/>
    <origin xyz="0 0 0.086" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-2.0944" upper="0" effort="2.5" velocity="5.24"/>
    <dynamics damping="0.1" friction="0.1"/>
  </joint>

  <!-- ==================== LOWER ARM LINK ==================== -->
  <link name="lower_arm_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://meshes/visual/lower_arm_link.stl"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://meshes/collision/lower_arm_link.stl"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.003 0 0.024" rpy="0 0 0"/>
      <mass value="0.10"/>
      <inertia ixx="0.00008" ixy="0" ixz="0"
               iyy="0.00008" iyz="0" izz="0.00002"/>
    </inertial>
  </link>

  <!-- ==================== WRIST PITCH JOINT ==================== -->
  <joint name="wrist_pitch_joint" type="revolute">
    <parent link="lower_arm_link"/>
    <child link="wrist_link"/>
    <origin xyz="0 0 0.043" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-1.5708" upper="1.5708" effort="2.5" velocity="5.24"/>
    <dynamics damping="0.1" friction="0.1"/>
  </joint>

  <!-- ==================== WRIST LINK ==================== -->
  <link name="wrist_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://meshes/visual/wrist_link.stl"/>
      </geometry>
      <material name="dark_grey"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://meshes/collision/wrist_link.stl"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="-0.008 0 0.016" rpy="0 0 0"/>
      <mass value="0.10"/>
      <inertia ixx="0.00008" ixy="0" ixz="0"
               iyy="0.00008" iyz="0" izz="0.00004"/>
    </inertial>
  </link>

  <!-- ==================== WRIST ROLL JOINT ==================== -->
  <joint name="wrist_roll_joint" type="revolute">
    <parent link="wrist_link"/>
    <child link="gripper_base"/>
    <origin xyz="0 0 0.050" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="-3.14159" upper="3.14159" effort="2.5" velocity="5.24"/>
    <dynamics damping="0.1" friction="0.1"/>
  </joint>

  <!-- ==================== GRIPPER BASE ==================== -->
  <link name="gripper_base">
    <visual>
      <origin xyz="0 0 0.010" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://meshes/visual/gripper_base.stl"/>
      </geometry>
      <material name="yellow"/>
    </visual>
    <collision>
      <origin xyz="0 0 0.010" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://meshes/collision/gripper_base.stl"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0 0 0.010" rpy="0 0 0"/>
      <mass value="0.06"/>
      <inertia ixx="0.00002" ixy="0" ixz="0"
               iyy="0.00002" iyz="0" izz="0.00001"/>
    </inertial>
  </link>

  <!-- ==================== LEFT FINGER JOINT ==================== -->
  <joint name="left_finger_joint" type="revolute">
    <parent link="gripper_base"/>
    <child link="left_finger"/>
    <origin xyz="0 0.020 0.020" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="0" upper="0.5236" effort="1.0" velocity="5.24"/>
    <dynamics damping="0.05" friction="0.05"/>
  </joint>

  <!-- ==================== LEFT FINGER ==================== -->
  <link name="left_finger">
    <visual>
      <origin xyz="0 0 0.020" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://meshes/visual/left_finger.stl"/>
      </geometry>
      <material name="yellow"/>
    </visual>
    <collision>
      <origin xyz="0 0 0.020" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://meshes/collision/left_finger.stl"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0 0 0.020" rpy="0 0 0"/>
      <mass value="0.02"/>
      <inertia ixx="0.000004" ixy="0" ixz="0"
               iyy="0.000004" iyz="0" izz="0.000001"/>
    </inertial>
  </link>

  <!-- ==================== RIGHT FINGER JOINT ==================== -->
  <joint name="right_finger_joint" type="revolute">
    <parent link="gripper_base"/>
    <child link="right_finger"/>
    <origin xyz="0 -0.020 0.020" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-0.5236" upper="0" effort="1.0" velocity="5.24"/>
    <dynamics damping="0.05" friction="0.05"/>
  </joint>

  <!-- ==================== RIGHT FINGER ==================== -->
  <link name="right_finger">
    <visual>
      <origin xyz="0 0 0.020" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://meshes/visual/right_finger.stl"/>
      </geometry>
      <material name="yellow"/>
    </visual>
    <collision>
      <origin xyz="0 0 0.020" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://meshes/collision/right_finger.stl"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0 0 0.020" rpy="0 0 0"/>
      <mass value="0.02"/>
      <inertia ixx="0.000004" ixy="0" ixz="0"
               iyy="0.000004" iyz="0" izz="0.000001"/>
    </inertial>
  </link>

</robot>
